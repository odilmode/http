Chirpy — RESTful API Server in Go
🚀 Project Overview
Chirpy is a RESTful HTTP API server built with Go and PostgreSQL.
It powers a simple microblogging platform, allowing users to register, log in, post chirps, and manage their data securely.

🎯 Project Goals
Understand the internals of HTTP servers and web APIs

Build a production-style backend without frameworks

Communicate via JSON, HTTP headers, and standard status codes

Use Go’s type-safe SQLC for PostgreSQL interactions

Implement JWT-based authentication and refresh tokens

Handle webhooks securely for user subscription upgrades

🗺️ System Architecture
Client → HTTP Handlers → Business Logic → Database (PostgreSQL)
Handlers: Process HTTP requests/responses

Business Logic: Authentication, authorization, and data validation

Database Access: Type-safe queries generated by SQLC

📋 API Reference
Method	Endpoint	Description
POST	/api/users	Register new user
POST	/api/login	User login, returns JWT and Refresh Token
POST	/api/chirps	Post a new chirp (Authenticated)
GET	/api/chirps	Get all chirps (supports author_id & sort query params)
DELETE	/api/chirps/{chirpID}	Delete user’s chirp
POST	/api/polka/webhooks	Handle external user upgrade events
POST	/admin/reset	Reset database (Admin use only)

🗄️ Database Schema
users

id UUID PK

email TEXT UNIQUE

hashed_password TEXT

is_chirpy_red BOOLEAN DEFAULT FALSE

created_at TIMESTAMP

updated_at TIMESTAMP

chirps

id UUID PK

body TEXT

user_id UUID FK

created_at TIMESTAMP

updated_at TIMESTAMP

refresh_tokens

token TEXT PK

user_id UUID FK

created_at TIMESTAMP

updated_at TIMESTAMP

expires_at TIMESTAMP

🔐 Authentication & Authorization
JWT Tokens for access control (1 hour expiration)

Refresh Tokens with DB persistence (60 days expiration)

Passwords securely hashed with bcrypt

📨 Webhooks
Accepts user.upgraded events from external sources

Upgrades user’s is_chirpy_red status upon webhook call

🛠️ Setup & Running
# Clone the project
git clone https://github.com/<your_username>/chirpy.git

# Install dependencies
go mod tidy

# Run DB migrations
goose postgres "postgres://<user>:<pass>@localhost:5432/chirpy" up

# Generate SQLC queries
sqlc generate

# Run the server
go run .
🧪 Testing
Use bootdev run <test_id> to run Boot.dev integration tests

POST /admin/reset can reset the database during testing

📝 Lessons Learned
How to structure clean HTTP handlers in Go

Working with JWT securely

Building a minimal but realistic REST API

Using SQLC for safer DB access

🚀 Future Improvements
Add middleware for rate limiting

Add support for HTTPS and production deployment

Write unit tests for business logic

CI/CD with automated tests

