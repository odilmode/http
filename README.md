Chirpy â€” RESTful API Server in Go
ğŸš€ Project Overview
Chirpy is a RESTful HTTP API server built with Go and PostgreSQL.
It powers a simple microblogging platform, allowing users to register, log in, post chirps, and manage their data securely.

ğŸ¯ Project Goals
Understand the internals of HTTP servers and web APIs

Build a production-style backend without frameworks

Communicate via JSON, HTTP headers, and standard status codes

Use Goâ€™s type-safe SQLC for PostgreSQL interactions

Implement JWT-based authentication and refresh tokens

Handle webhooks securely for user subscription upgrades

ğŸ—ºï¸ System Architecture
Client â†’ HTTP Handlers â†’ Business Logic â†’ Database (PostgreSQL)
Handlers: Process HTTP requests/responses

Business Logic: Authentication, authorization, and data validation

Database Access: Type-safe queries generated by SQLC

ğŸ“‹ API Reference
Method	Endpoint	Description
POST	/api/users	Register new user
POST	/api/login	User login, returns JWT and Refresh Token
POST	/api/chirps	Post a new chirp (Authenticated)
GET	/api/chirps	Get all chirps (supports author_id & sort query params)
DELETE	/api/chirps/{chirpID}	Delete userâ€™s chirp
POST	/api/polka/webhooks	Handle external user upgrade events
POST	/admin/reset	Reset database (Admin use only)

ğŸ—„ï¸ Database Schema
users

id UUID PK

email TEXT UNIQUE

hashed_password TEXT

is_chirpy_red BOOLEAN DEFAULT FALSE

created_at TIMESTAMP

updated_at TIMESTAMP

chirps

id UUID PK

body TEXT

user_id UUID FK

created_at TIMESTAMP

updated_at TIMESTAMP

refresh_tokens

token TEXT PK

user_id UUID FK

created_at TIMESTAMP

updated_at TIMESTAMP

expires_at TIMESTAMP

ğŸ” Authentication & Authorization
JWT Tokens for access control (1 hour expiration)

Refresh Tokens with DB persistence (60 days expiration)

Passwords securely hashed with bcrypt

ğŸ“¨ Webhooks
Accepts user.upgraded events from external sources

Upgrades userâ€™s is_chirpy_red status upon webhook call

ğŸ› ï¸ Setup & Running
# Clone the project
git clone https://github.com/<your_username>/chirpy.git

# Install dependencies
go mod tidy

# Run DB migrations
goose postgres "postgres://<user>:<pass>@localhost:5432/chirpy" up

# Generate SQLC queries
sqlc generate

# Run the server
go run .
ğŸ§ª Testing
Use bootdev run <test_id> to run Boot.dev integration tests

POST /admin/reset can reset the database during testing

ğŸ“ Lessons Learned
How to structure clean HTTP handlers in Go

Working with JWT securely

Building a minimal but realistic REST API

Using SQLC for safer DB access

ğŸš€ Future Improvements
Add middleware for rate limiting

Add support for HTTPS and production deployment

Write unit tests for business logic

CI/CD with automated tests

